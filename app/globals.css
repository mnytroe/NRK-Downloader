@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root { --ring: theme(colors.brand.500); }
  html, body { height: 100%; }
  body {
    @apply text-slate-900 dark:text-slate-100 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;
    background-image: theme(backgroundImage.radial-soft);
    background-attachment: fixed;
  }
  ::selection { @apply bg-brand-500 bg-opacity-20 text-current; }
  :focus-visible { outline: none; box-shadow: 0 0 0 3px color-mix(in oklab, var(--ring) 40%, transparent); }
  @media (prefers-reduced-motion: reduce) {
    * { animation-duration:.01ms!important; animation-iteration-count:1!important; transition-duration:.01ms!important; }
  }
}

@layer components {
  /* Layout */
  .shell { @apply min-h-screen flex items-center justify-center p-6; }
  .panel { @apply max-w-2xl w-full p-8 space-y-6 rounded-2xl bg-white dark:bg-gray-800 shadow-soft transition-colors; }
  .panel-hover { @apply hover:shadow-hover transition-shadow; }

  /* Tekst */
  .title { @apply text-3xl font-bold text-gray-900 dark:text-white; }
  .muted { @apply text-gray-600 dark:text-gray-300; }

  /* Knapper */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl font-semibold transition
           focus-visible:ring-2 focus-visible:ring-brand-500/70 disabled:opacity-60 disabled:pointer-events-none;
  }
  /* Buttons: comfortable on desktop, compact on mobile */
  .btn        { @apply rounded-xl h-10 px-4 text-sm md:h-11 md:px-5 md:text-base; }
  .btn-primary{ @apply btn bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700; }   /* inherits sizing from .btn */
  .btn-ghost   { @apply btn bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100; }
  .btn-outline { @apply btn border border-gray-300 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700; }

  /* Form */
  .input {
    @apply w-full rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800
           text-inherit px-3 py-2 transition placeholder:text-gray-400
           hover:border-gray-400 dark:hover:border-gray-500
           focus-visible:ring-2 focus-visible:ring-brand-500/70;
  }
  .field { @apply space-y-2; }
  .label { @apply text-sm font-medium text-gray-700 dark:text-gray-200; }

  /* Drop zone */
  /* Input wrapper: clearer ring in dark mode */
  .drop-wrap {
    @apply relative w-full rounded-xl transition
           ring-2 ring-inset ring-gray-300 dark:ring-white/70
           hover:ring-gray-400 dark:hover:ring-white/80
           bg-transparent;
  }
  .drop-wrap:has(input:focus-visible) {
    @apply ring-2 ring-brand-500/80;
  }
  
  .drop-wrap--drag {
    @apply ring-2 ring-blue-500 dark:ring-blue-400/80
           bg-blue-50/60 dark:bg-blue-900/25;
  }
  
  .input-plain { 
    @apply input border-0 ring-0 shadow-none bg-transparent focus:ring-0 focus:outline-none h-12; 
  } /* ens høyde */

  /* Icon button */
  .icon-btn {
    @apply inline-flex items-center justify-center rounded-xl p-2
           bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
           text-gray-900 dark:text-gray-100
           border-0 ring-0 shadow-sm transition
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/70;
  }

  /* Toolbar/strip */
  .toolbar {
    @apply flex items-center justify-between gap-3 rounded-xl bg-white/70 dark:bg-gray-800/70
           border border-gray-200 dark:border-gray-700 backdrop-blur p-2;
  }

  /* Delestreker og spacing */
  .section-divider { 
    @apply border-t border-gray-200 dark:border-white/10 pt-6 mt-4; 
  }

  /* Badge styling */
  .badge {
    @apply inline-flex items-center gap-2 rounded-full px-3 h-8 text-sm font-medium;
  }
  .badge-idle    { @apply text-gray-600 dark:text-gray-300 bg-gray-100/60 dark:bg-white/5; }
  .badge-working { @apply text-blue-700 dark:text-blue-300 bg-blue-100/70 dark:bg-blue-900/30; }
  .badge-done    { @apply text-green-700 dark:text-green-300 bg-green-100/70 dark:bg-green-900/30; }
  .badge-error   { @apply text-red-700 dark:text-red-300 bg-red-100/70 dark:bg-red-900/30; }
  .badge-aborted { @apply text-yellow-700 dark:text-yellow-300 bg-yellow-100/70 dark:bg-yellow-900/30; }

  /* Info cards */
  .info-card {
    @apply rounded-xl p-4 border;
  }
  .info-blue {
    @apply bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800;
  }
  .info-yellow {
    @apply bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800;
  }

  /* Små animasjoner */
  .fade-in { @apply animate-fade-in; }
  .slide-up { @apply animate-slide-up; }
}

